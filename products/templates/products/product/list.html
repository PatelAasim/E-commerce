{% extends "base.html" %}

{% block title %}my site{% endblock %}

{% block content %}

<div style="max-width: 1200px; margin: 0 auto; padding: 16px;">

    <!-- Categories Horizontal Bar -->
    <div style="background-color: #f9fafb; padding: 12px 16px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 24px; overflow-x: auto; white-space: nowrap;">
        <h2 style="font-weight: bold; font-size: 18px; margin-bottom: 8px; color: #1f2937;">Categories</h2>
        <div style="display: flex; gap: 12px;">
            {% for category in categories %}
            <a href="{% url 'products:product_list_by_category' category.slug %}" 
               style="display: inline-block; padding: 8px 16px; border-radius: 20px; text-decoration: none; background-color: #fff; border: 1px solid #ddd; color: #374151; font-size: 14px; transition: background-color 0.2s, color 0.2s;"
               onmouseover="this.style.backgroundColor='#4f46e5'; this.style.color='#fff';"
               onmouseout="this.style.backgroundColor='#fff'; this.style.color='#374151';">
                {{ category.name }}
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Main Content: Products -->
    <main>
        {% if category %}
        <h2 style="font-weight: bold; font-size: 20px; margin-bottom: 16px; color: #1f2937;">{{ category.name }}</h2>
        {% else %}
        <h2 style="font-weight: bold; font-size: 20px; margin-bottom: 16px; color: #1f2937;">All Products:</h2>
        {% endif %}

        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
            {% for product in products %}
            <a href="{% url 'products:product_detail' product.id product.slug %}" style="text-decoration: none; color: inherit;">
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 16px; text-align: center; transition: transform 0.2s, box-shadow 0.2s; background-color: #fff;"
                     onmouseover="this.style.transform='scale(1.03)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)';"
                     onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 1px 4px rgba(0,0,0,0.05)';">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 100%; height: 200px; object-fit: contain; border-radius: 4px; margin-bottom: 8px;">
                    {% else %}
                    <p style="font-size: 14px; color: #999;">The product is not available</p>
                    {% endif %}
                    <h3 style="font-weight: 600; margin: 12px 0 8px; color: #1f2937;">{{ product.name }}</h3>
                    <p style="font-size: 14px; color: #555;">{{ product.description }}</p>
                    <p style="color: #4f46e5; font-weight: bold; margin-top: 8px;">â‚¹{{ product.price }}</p>
                </div>
            </a>
            {% endfor %}
        </div>
    </main>
</div>

{% endblock %}
